<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Angular jlikness.watch Counting Example</title>
    <script src="https://code.angularjs.org/1.2.9/angular.js"></script>
    <script src="jlWatch.js"></script>
    <script type="text/javascript">
        'use strict';

        (function (app) {
            app.run(['$rootScope', 'jlWatchService', function ($rootScope, ws) {
                angular.extend($rootScope, {
                    title: 'Angular Watchers',
                    watchCount: 0,
                    refreshWatches: function () {
                        this.watchCount = ws.countWatches();
                    }
                });        
            }]);
        })(angular.module('myApp', ['jlikness.watch']));
    </script>
</head>
<body>
<h1>Angular jlikness.watch Counting Example</h1>
<div ng-app="myApp" jl-watch="">{{title}}
    <div>Watches: {{watchCount}}</div>
    <div><button ng-click='refreshWatches()'>Refresh</button></div>
</div>
</body>
</html>
